CREATE TABLE Asiakas(
Id INT NOT NULL AUTO_INCREMENT,
etunimi VARCHAR(20),
sukunimi VARCHAR(30),
email VARCHAR(30) NOT NULL,
osoite VARCHAR(30),
postinro VARCHAR(5),
salasana VARCHAR(300) NOT NULL,
suola VARCHAR(300) NOT NULL,
suoksikkiPitsa VARCHAR(30),
PRIMARY KEY (Id)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Admin(
Id INT NOT NULL AUTO_INCREMENT,
suola VARCHAR(30) NOT NULL,
kayttajatunnus VARCHAR(30) NOT NULL,
salasana VARCHAR(300) NOT NULL,
PRIMARY KEY (Id) 
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Tavarantoimittaja(
nimi VARCHAR(30) NOT NULL,
email VARCHAR(30) NOT NULL,
PRIMARY KEY (nimi)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Tuote(
id INT NOT NULL AUTO_INCREMENT,
nimi VARCHAR(30) NOT NULL,
hinta DECIMAL (5,2) NOT NULL,
taytteet VARCHAR(100) NOT NULL,
poisto CHAR(20),
PRIMARY KEY (id)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Raaka_aine(
id INT NOT NULL AUTO_INCREMENT,
nimi VARCHAR(100) NOT NULL,
tuote_id INT,
poisto CHAR(20),
PRIMARY KEY (id),
FOREIGN KEY (tuote_id) REFERENCES Tuote(id)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE PizzanTaytteet(
tuoteID INT NOT NULL,
RaakaAineID INT NOT NULL,
PRIMARY KEY (tuoteID, RaakaAineID), 
FOREIGN KEY (tuoteID) REFERENCES Tuote(id),
FOREIGN KEY (RaakaAineID) REFERENCES Raaka_aine(id)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Tilaus(
tilausnumero VARCHAR(30) NOT NULL,
asiakastunnus VARCHAR(30) NOT NULL,
maara INT NOT NULL,
kokonaissumma DECIMAL(5,2) NOT NULL,
toimitusaika DATETIME NOT NULL,
tuoteID INT NOT NULL,
toimitustapa VARCHAR(30) NOT NULL,
PRIMARY KEY (tilausnumero), 
FOREIGN KEY (tuoteID) REFERENCES Tuote (id)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Tuotteentilaus(
asiakasID INT NOT NULL,
tilausnumero VARCHAR(30) NOT NULL,
PRIMARY KEY (asiakasID, tilausnumero), 
FOREIGN KEY (asiakasID) REFERENCES Asiakas (ID),
FOREIGN KEY (tilausnumero) REFERENCES Tilaus (tilausnumero)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Tilaushistoria(
tilausnumero VARCHAR(30) NOT NULL,
toimitusaika DATETIME NOT NULL,
kayttajatunnus VARCHAR(30) NOT NULL,
PRIMARY KEY (tilausnumero),
FOREIGN KEY (tilausnumero) REFERENCES Tilaus (tilausnumero)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Juomat(
id INT NOT NULL AUTO_INCREMENT,
juoma VARCHAR(30) NOT NULL,
hinta DECIMAL (5,2) NOT NULL,
poisto CHAR(20),
PRIMARY KEY (id)
)ENGINE=InnoDB DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_swedish_ci;

CREATE TABLE Palaute(
id INT NOT NULL AUTO_INCREMENT,
palaute VARCHAR(500) NOT NULL,
PRIMARY KEY (id),
)ENGINE=InnoDB;

DROP TABLE Juomat;
DROP TABLE Tilaushistoria;
DROP TABLE Tuotteentilaus;
DROP TABLE Tilaus;
DROP TABLE PizzanTaytteet;
DROP TABLE Raaka_aine;
DROP TABLE Tuote;
DROP TABLE Tavarantoimittaja;
DROP TABLE Admin;
DROP TABLE Asiakas;


